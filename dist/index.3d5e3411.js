var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire5951;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5951=s);let o=0,r=0;function c(e,t,n){"fixed"===e&&(o=window.scrollY||document.documentElement.scrollTop,r=window.scrollX||document.documentElement.scrollLeft),body.style.position=e,body.style.width=t,body.style.overflowY=n,"fixed"!==e&&window.scrollTo(r,o)}const a=document.querySelector(".burger"),i=document.querySelector(".footer-bar__sidebar-btn"),l=document.querySelector(".sidebar"),u=document.querySelector(".sidebar .btn-close");document.getElementById("body");function d(){l.classList.contains("sidebar_active")?(l.classList.remove("sidebar_active"),c(null,null,null)):(l.classList.add("sidebar_active"),c("fixed","100%","scroll"),m())}function m(){l.classList.contains("sidebar_active")?document.addEventListener("click",_):document.removeEventListener("click",_)}function _(e){l.contains(e.target)||a.contains(e.target)||i.contains(e.target)||(l.classList.remove("sidebar_active"),c(null,null,null),m())}a.addEventListener("click",d),i.addEventListener("click",d),u.addEventListener("click",(function(){l.classList.contains("sidebar_active")&&(l.classList.remove("sidebar_active"),c(null,null,null))}));var b=s("02iEE");const p=[{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_registration-login"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Пароль"},{type:"password"},{"data-input":"1"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"1"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-first"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Повторите пароль"},{type:"password"},{"data-input":"2"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"2"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-second"]},{tag:"button",class:["btn","registration__btn"],content:"Зарегистрироваться",attributes:[{type:"submit"}]}],g=[{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_login"]},{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Введите пароль"},{type:"password"},{"data-input":"input"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"password"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_password"]},{tag:"button",class:["btn","login-btn"],content:"Войти",attributes:[{type:"submit"}]}];var v=s("3LgNA");function L(e,t){t.forEach((t=>{const n=document.createElement(t.tag);Array.isArray(t.class)&&t.class.length>0?t.class.forEach((e=>n.classList.add(e))):n.classList.add(t.class),t.id&&(n.id=t.id),t.text&&(n.textContent=t.text),t.content&&(n.textContent=t.content),t.dataset&&(n.dataset.data=t.dataset.data),t.attributes&&t.attributes.length>0&&t.attributes.forEach((e=>{const[t,s]=Object.entries(e)[0];n.setAttribute(t,s)})),e.appendChild(n)}))}function f(e,t,n){const s=document.createElement("form");s.classList.add(e),L(s,t),n.appendChild(s)}v=s("3LgNA"),v=s("3LgNA"),b=s("02iEE"),v=s("3LgNA");function y(){(0,v.removeTokenStore)(),localStorage.setItem("basketStore",JSON.stringify([])),location.reload()}const S=document.querySelector(".user__submenu");async function h(){const e=(0,v.getTokenStore)(),t=await b.AuthenticationApi.getUserByToken(e);if(t){const e=S.children;S.removeChild(e[1]),S.removeChild(e[1]),e[0].querySelector(".modal-header__title > h2").textContent=`Здравствуйте, ${t.login}!`;const n=document.createElement("button");n.type="button",n.classList.add("btn","user__submenu-btn-exit"),n.textContent="Выйти из аккаунта",S.appendChild(n),n.addEventListener("click",y)}}const k=document.querySelector(".user-btn");function w(){(0,v.getTokenStore)()?(h(),k.classList.add("user-btn_authorized")):k.classList.remove("user-btn_authorized")}function E(e,t){const n=document.querySelector(e).parentNode;n.innerHTML=null;const s=document.createElement("div"),o=document.createElement("span");s.classList.add("success-container"),o.classList.add("success-message"),o.textContent=t,s.appendChild(o),n.append(s),setTimeout((function(){n.remove()}),3e3)}var q=s("77CKc");const C=document.querySelector(".user__registration"),x=document.querySelector(".user__registration-btn-close"),T=document.querySelector(".user__submenu-btn-registration"),A=document.querySelector(".user-btn");function O(){C.classList.add("user__registration_active"),C.classList.contains("user__registration_active")&&(document.addEventListener("click",N),A.classList.add("user-btn_active"),document.querySelector(".registration__btn").addEventListener("click",M))}function N(e){C.contains(e.target)||T.contains(e.target)||C.classList.remove("user__registration_active"),C.classList.contains("user__registration_active")||(document.removeEventListener("click",N),A.classList.remove("user-btn_active"),registrationForm=document.querySelector(".user__registration-form"),registrationForm&&(registrationForm.reset(),document.querySelector('[data-input="1"]').type="password",document.querySelector('[data-input="2"]').type="password",document.querySelector('[data-btn="1"]').textContent="показать пароль",document.querySelector('[data-btn="2"]').textContent="показать пароль",D()))}function D(){const e=document.querySelector(".error-message_registration-login"),t=document.querySelector(".error-message_registration-password-first"),n=document.querySelector(".error-message_registration-password-second");e.textContent=null,t.textContent=null,n.textContent=null}function M(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__input"),t=[];const n=document.querySelector(".error-message_registration-login"),s=document.querySelector(".error-message_registration-password-first"),o=document.querySelector(".error-message_registration-password-second");e.forEach((e=>t.push(e.value)));const r={login:t[0],password:t[1],token:Math.random()*(new Date).getTime()};let c=await b.AuthenticationApi.getUserByLogin(r.login);const a=(e,t,n,s)=>e.textContent=`${s} должен содержать от ${t} до ${n} символов`,i=r.password.length,l=r.login.length;r.login.match(/[!@#$%^&*()[\]{}|\\;:'"<>.,\/?`~=+\-№_]/)?n.textContent="Логин не должен содержать пробелы и символы: !@#$%^&*()-_+={}[]|\\;:'\"<>.,/?`~№":i<8||i>20?a(s,8,20,"Пароль"):l<3||l>20?a(n,3,20,"Логин"):t[1]!==t[2]?(s.textContent="Пароль не совпадает",o.textContent="Пароль не совпадает"):void 0!==c?n.textContent=`Пользователь с логином "${r.login}" уже зарегистрирован`:(b.AuthenticationApi.setUser(r.login,r.password,r.token).then((()=>E(".user__registration-form","Регистрация прошла успешно ☑"))),(0,v.setTokenStore)(r.token),setTimeout((()=>{w(),(0,q.linkStoreToUserData)()}),3e3))}(),D()}x.addEventListener("click",(function(){C.classList.remove("user__registration_active")})),document.addEventListener("DOMContentLoaded",(function(){f("user__registration-form",p,C),function(){const e=document.querySelector('[data-input="1"]'),t=document.querySelector('[data-input="2"]'),n=document.querySelector('[data-btn="1"]'),s=document.querySelector('[data-btn="2"]');document.querySelectorAll(".btn-show-password").forEach((o=>{o.addEventListener("click",(function(o){let r="1"===o.target.getAttribute("data-btn")?e:t,c="password"===r.type?"text":"password";r.type=c;let a="1"===o.target.getAttribute("data-btn")?n:s,i="показать пароль"===a.textContent?"скрыть пароль":"показать пароль";a.textContent=i}))}))}(),w()}));b=s("02iEE"),v=s("3LgNA");const I=document.querySelector(".user__login"),$=document.querySelector(".user__login-btn-close"),U=document.querySelector(".user__submenu-btn-login"),H=document.querySelector(".user-btn");function B(){I.classList.add("user__login_active"),I.classList.contains("user__login_active")&&document.addEventListener("click",J),H.classList.add("user-btn_active"),document.querySelector(".login-btn").addEventListener("click",W)}function J(e){I.contains(e.target)||U.contains(e.target)||I.classList.remove("user__login_active"),I.classList.contains("user__login_active")||(document.removeEventListener("click",J),H.classList.remove("user-btn_active"),function(){const e=document.querySelector(".user__login-form");if(e){e.reset();document.querySelector('[data-btn="password"]').textContent="показать пароль",document.querySelector('[data-input="input"]').type="password";F()}}())}function F(){const e=document.querySelector(".error-message_login"),t=document.querySelector(".error-message_password");e.textContent=null,t.textContent=null}function W(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__login-input"),t=[];const n=document.querySelector(".error-message_login"),s=document.querySelector(".error-message_password");e.forEach((e=>{t.push(e.value)}));let o=await b.AuthenticationApi.getUserByLogin(t[0]);o&&o.password===t[1]?(E(".user__login-form","Вы вошли ✓"),(0,v.setTokenStore)(o.token),localStorage.setItem("basketStore",JSON.stringify(o.orders)),w()):(n.textContent="Неверный логин или пароль",s.textContent="Неверный логин или пароль")}(),F()}$.addEventListener("click",(function(){I.classList.remove("user__login_active"),H.classList.remove("user-btn_active")})),document.addEventListener("DOMContentLoaded",(function(){f("user__login-form",g,I),function(){const e=document.querySelector('[data-btn="password"]'),t=document.querySelector('[data-input="input"]');e.addEventListener("click",(function(){neededType="password"===t.type?"text":"password",t.type=neededType,neededText="показать пароль"===e.textContent?"скрыть пароль":"показать пароль",e.textContent=neededText}))}()}));const j=document.querySelector(".user-btn"),Y=document.querySelector(".user__submenu"),z=document.querySelector(".user__submenu-btn-close"),K=document.querySelector(".user__submenu-btn-registration"),P=document.querySelector(".user__submenu-btn-login"),R=document.querySelector(".footer-bar__user");function Z(){Y.classList.contains("user__submenu_active")?(j.classList.add("user-btn_active"),document.addEventListener("click",V)):(j.classList.remove("user-btn_active"),document.removeEventListener("click",V))}function V(e){Y.contains(e.target)||j.contains(e.target)||R.contains(e.target)||e.target.classList.contains("basket__btn-order")||(Y.classList.remove("user__submenu_active"),Z())}j.addEventListener("click",(function(){Y.classList.toggle("user__submenu_active"),Z()})),z.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z()})),K.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z(),O()})),P.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z(),B()}));const X=document.querySelector(".footer-bar__user"),G=document.querySelector(".user__submenu"),Q=document.querySelectorAll(".btn-close"),ee=document.querySelector(".user__registration"),te=document.querySelector(".user__login");X.addEventListener("click",(function(){G.classList.contains("user__submenu_active")||ee.classList.contains("user__registration_active")||te.classList.contains("user__login_active")?G.classList.contains("user__submenu_active")&&(G.classList.remove("user__submenu_active"),c(null,null,null),Z()):(G.classList.add("user__submenu_active"),c("fixed","100%","scroll"),Z())})),Q.forEach((e=>e.addEventListener("click",(()=>c(null,null,null)))));q=s("77CKc"),v=s("3LgNA");const ne=document.querySelector(".basket__modal"),se=document.querySelector(".footer-bar__basket-btn");function oe(){const e=ie();ne.classList.contains("basket__modal_active")?ne.classList.remove("basket__modal_active"):(e.length>0?(le(),_e("block","flex"),pe()):le(),ne.classList.add("basket__modal_active"),ce())}function re(){const e=document.querySelector(".basket-block");ne.classList.remove("basket__modal_active"),e.innerHTML=null,c(null,null,null)}function ce(){ne.classList.contains("basket__modal_active")?document.addEventListener("click",ae):document.removeEventListener("click",ae)}function ae(e){ne.contains(e.target)||e.target.classList.contains("basket-btn")||e.target.classList.contains("basket__list-item-btn-remove")||se.contains(e.target)||(ne.classList.remove("basket__modal_active"),ce())}function ie(){const e=localStorage.getItem("basketStore");return JSON.parse(e)||[]}function le(){const e=document.querySelector(".basket-block"),t=document.createElement("ul");t.classList.add("basket__list"),e.appendChild(t),ue("☹<br>Корзина пуста")}function ue(e){const t=ie(),n=document.querySelector(".basket__list");0===t.length?n.innerHTML=e:(n.textContent=null,t.forEach((e=>{n.append(function(e){const t=document.createElement("li");t.classList.add("basket__list-item");const n=function(){const e=document.createElement("div");return e.classList.add("basket__list-item-wrapper"),e}();return n.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-price");const n=document.createElement("h5");return n.textContent=""+(e.price+"$"),t.append(n),t}(e),function(e){const t=document.createElement("button");return t.classList.add("icon-trash","basket__list-item-btn-remove"),t.setAttribute("data-id",`${e.id}`),t.addEventListener("click",de),t}(e)),t.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-title");const n=document.createElement("h5");return n.textContent=`${e.title}`,t.append(n),t}(e),n),t}(e))})))}function de(e){const t=document.querySelector(".basket__list");if(e.target.classList.contains("basket__list-item-btn-remove")){!function(e){let t=localStorage.getItem("basketStore");if(t){let n=JSON.parse(t);const s=n.findIndex((t=>t.id===e));-1!==s&&(n.splice(s,1),localStorage.setItem("basketStore",JSON.stringify(n)),(0,q.linkStoreToUserData)())}}(e.target.dataset.id),e.target.closest(".basket__list-item").remove(),ge(),pe()}0===t.children.length&&(ue("☹<br>Корзина пуста"),_e("none","none"))}function me(){const e=document.querySelectorAll(".basket__list-item");localStorage.setItem("basketStore",JSON.stringify([])),e.forEach((e=>e.remove())),ue("☹<br>Корзина пуста"),(0,q.linkStoreToUserData)(),_e("none","none")}function _e(e,t){const n=document.querySelector(".basket__btn-delete-all"),s=document.querySelector(".basket__footer");n.style.display=e,s.style.display=t}function be(){const e=document.querySelector(".user__submenu");(0,v.getTokenStore)()?(localStorage.setItem("basketStore",JSON.stringify([])),(0,q.linkStoreToUserData)(),_e("none","none"),ue("Заказ успешно создан 📦")):(ne.classList.remove("basket__modal_active"),e.classList.add("user__submenu_active"),Z())}function pe(){const e=document.querySelector(".basket__total-price-value"),t=ge();e.innerText=` ${t} $`}function ge(){const e=JSON.parse(localStorage.getItem("basketStore"));let t=0;return e.forEach((e=>{t+=e.price})),t}se.addEventListener("click",oe),se.addEventListener("click",(function(){ne.classList.contains("basket__modal_active")?c("fixed","100%","scroll"):c(null,null,null)})),document.querySelector(".basket-btn").addEventListener("click",oe),document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.createElement("div");e.classList.add("modal-header"),e.innerHTML='\n\t\t<div class="modal-header__title">\n\t\t<h2>Корзина</h2>\n\t\t</div>\n\t\t<button class="btn-close basket__modal-btn-close"></button>\n\t\t',ne.appendChild(e);document.querySelector(".basket__modal-btn-close").addEventListener("click",re)}(),function(){const e=document.createElement("div");e.classList.add("basket-block"),ne.appendChild(e)}(),function(){const e=document.createElement("button");e.classList.add("btn","basket__btn-delete-all"),e.innerText="Очистить корзину",e.addEventListener("click",me),ne.appendChild(e)}(),function(){const e=ie(),t=document.createElement("div");t.classList.add("basket__footer"),t.innerHTML='\n\t<button type="button" class="btn basket__btn-order">Заказать</button>\n\t <div class="basket__total-price">\n\t  <h4 class="basket__total-price-title">Итого:</h4>\n\t  <h4 class="basket__total-price-value"></h4>\n\t </div>\n\t',ne.appendChild(t);document.querySelector(".basket__btn-order").addEventListener("click",be),0===e.length&&_e("none","none")}()}));class ve{static imagesUrlApi="https://646e07219c677e23218ae1e2.mockapi.io/users/images";static async getImages(){return await fetch(this.imagesUrlApi).then((e=>e.json())).catch((e=>console.error(`Произошла ошибка при загрузке изображения: ${e}`)))}}const Le=document.querySelector(".swiper-wrapper");function fe(e){Le.appendChild(e),new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:2e3,disableOnInteraction:!0},speed:1500})}document.addEventListener("DOMContentLoaded",(async function(){await ve.getImages().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("div");n.classList.add("swiper-slide");const s=document.createElement("img");s.alt=t,s.src=e,s.loading="eager",n.append(s),fe(n)}(e.url,e.alt)}))})).catch((e=>{throw e}))}));var ye=s("67T2y"),Se=s("2bZdl");const he=document.querySelector(".search"),ke=document.querySelector(".search__input"),we=document.querySelector(".search-btn"),Ee=document.querySelector(".cards__inner");let qe,Ce=[],xe=[];function Te(){document.querySelector(".search__list")&&document.addEventListener("click",Ae)}function Ae(e){if(e.target!==ke){let e=document.querySelector(".search__list");e&&e.remove(),document.removeEventListener("click",Ae)}}function Oe(e){Ee.innerHTML=null;let t=[];qe.forEach((n=>{n.title.toLowerCase().startsWith(e.toLowerCase())&&t.push(n)})),(0,Se.addCards)(t)}function Ne(e,t){e.forEach((e=>{const n=document.createElement("li");n.classList.add("search__list-item"),n.textContent=e,t.appendChild(n),document.querySelectorAll(".search__list-item").forEach((e=>{e.addEventListener("click",(function(e){Ee.innerHTML=null;const t=e.target.textContent;let n=[];qe.forEach((e=>{e.title.toLowerCase()===t.toLowerCase()&&n.push(e),e.brand.toLowerCase()===t.toLowerCase()&&n.push(e)})),(0,Se.addCards)(n)}))}))}))}ke.addEventListener("input",(function(e){let t=e.target.value,n=Ce.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),s=xe.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),o=document.querySelector(".search__list");if(!t)return void(o&&(o.remove(),Te()));o?o.innerHTML=null:(o=document.createElement("ul"),o.classList.add("search__list"),he.appendChild(o),Te());r=t,ke.addEventListener("keyup",(e=>{"Enter"===e.code&&(Oe(r),Ae({target:document}))})),we.addEventListener("click",(()=>Oe(t))),Ne(n,o),Ne(s,o);var r})),window.addEventListener("DOMContentLoaded",(async function(){qe=await(0,ye.getDataCards)(),qe.forEach((e=>{Ce.includes(e.title)||Ce.push(e.title),xe.includes(e.brand)||xe.push(e.brand)}))}));const De=document.querySelector(".order-list"),Me=document.querySelector(".company-list"),Ie=document.querySelector(".footer__content-wrapper-cust"),$e=document.querySelector(".footer__content-wrapper-comp"),Ue=document.querySelector(".icon-arrow-down-cust"),He=document.querySelector(".icon-arrow-down-comp"),Be=document.querySelector(".footer__btn-up");function Je(e,t,n,s){e.classList.contains(n)&&(e.classList.remove(n),t.classList.remove(s))}Ie.addEventListener("click",(function(){De.classList.contains("order-list_active")?(De.classList.remove("order-list_active"),Ue.classList.remove("icon-arrow-down-cust_active")):(De.classList.add("order-list_active"),Ue.classList.add("icon-arrow-down-cust_active"),Je(Me,He,"company-list_active","icon-arrow-down-comp_active"))})),$e.addEventListener("click",(function(){Me.classList.contains("company-list_active")?(Me.classList.remove("company-list_active"),He.classList.remove("icon-arrow-down-comp_active")):(Me.classList.add("company-list_active"),He.classList.add("icon-arrow-down-comp_active"),Je(De,Ue,"order-list_active","icon-arrow-down-cust_active"))})),window.addEventListener("scroll",(function(){const e=window.scrollY,t=document.documentElement.clientHeight;e>t&&(Be.classList.add("footer__btn-up_active"),setTimeout((()=>Be.classList.remove("footer__btn-up_active")),3e3))}));class Fe{static url="https://649060be1e6aa71680cb2478.mockapi.io/Brands";static async getBrandsImage(){return await fetch(this.url).then((e=>e.json())).catch((e=>console.log(e)))}}const We=document.querySelector(".brand__wrapper");!async function(){await Fe.getBrandsImage().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("a");n.classList.add("brand__inner");const s=document.createElement("img");s.src=e,s.setAttribute("alt",t),n.append(s),We.append(n)}(e.url,e.alt)}))}))}();Se=s("2bZdl"),ye=s("67T2y");const je=document.querySelector(".sidebar__list"),Ye=document.querySelector(".sidebar"),ze=document.querySelector(".cards__inner");let Ke;je.addEventListener("click",(function(e){const t=e.target.textContent;Pe.hasOwnProperty(t)&&async function(e){Ke=await(0,ye.getDataCards)(),ze.innerHTML=null;let t=[];Ke.forEach((n=>{n.title.toLowerCase().startsWith(e)&&t.push(n)})),(0,Se.addCards)(t),Ye.classList.remove("sidebar_active"),m(),c(null,null,null)}(Pe[t])}));const Pe={"Футболки":"майка","Обувь":"кроссовки","Брюки":"штаны","Байки":"байка","Верхняя одежда":"куртка"};
//# sourceMappingURL=index.3d5e3411.js.map
