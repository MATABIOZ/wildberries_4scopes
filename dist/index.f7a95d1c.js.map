{"mappings":"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","sources":["src/app/page-modules/product-card/product-card.js","src/app/core/API/cardsApi.js","src/app/core/utils/order/order.js","src/app/core/API/authenticationApi.js","src/app/stores/users-store/users-store.js","src/app/core/consts/keys.js","src/app/core/utils/cards/show-more.js"],"sourcesContent":["import { alyaStore, getCards } from \"../../core/API/cardsApi.js\"\r\nimport { linkStoreToUserData } from \"../../core/utils/order/order.js\"\r\nimport { hiddenCards } from \"../../core/utils/cards/show-more.js\"\r\n\r\nconst cardsBox = document.querySelector(\".cards__inner\")\r\n\r\nexport function addCards(arrayElements) {\r\n\tfor (let element of arrayElements) {\r\n\t\tcardsBox.appendChild(createCardElement(element))\r\n\t}\r\n\r\n\thiddenCards()\r\n}\r\n\r\nfunction createCardElement(element) {\r\n\tconst item = document.createElement(\"div\")\r\n\titem.classList.add(\"card\")\r\n\r\n\titem.innerHTML = `\r\n\t<div class=\"card__view\">\r\n\t\t<img src=\"${element.image}\" alt=\"image\" class=\"card__img\">\r\n\t\t<button type=\"button\" class=\"card__btn-quick-view\" data-id=\"${\r\n\t\t\telement.id\r\n\t\t}\">Быстрый просмотр</button>\r\n\t</div>\r\n\t<div class=\"card__inner\">\r\n\t\t<div class=\"card__info\">\r\n\t\t\t<h4 class=\"card__title\">${element.title}</h4>\r\n\t\t\t<h5 class=\"card__price\">${element.price + \"$\"}</h5>\r\n\t\t</div>\r\n\t\t<div class=\"card__subinfo\">\r\n\t\t\t<span class=\"card__discount\">${\"-\" + element.sale + \"%\"}</span>\r\n\t\t\t<span class=\"card__old-price\">${element.old_price + \"$\"}</span>\r\n\t\t</div>\r\n\t</div>\r\n\t<button type=\"button\" class=\"card__btn-add-basket\" data-id=\"${\r\n\t\telement.id\r\n\t}\">В корзину</button>`\r\n\r\n\treturn item\r\n}\r\n\r\nfunction createCardModal(element) {\r\n\tconst item = document.createElement(\"div\")\r\n\titem.classList.add(\"card-modal\")\r\n\r\n\titem.innerHTML = `\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"card-modal__wrapper\">\r\n\t\t\t\t<img class=\"card-modal__img\" src=\"${element.image}\">\r\n\t\t\t\t<div class=\"card-modal__inner\">\r\n\t\t\t\t\t<div class=\"modal-header card-modal__header\">\r\n\t\t\t\t\t\t<h2 class=\"modal-header__title\">${element.title}</h2>\r\n\t\t\t\t\t\t<button class=\"btn-close\" type=\"button\"></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"card-modal__info\"><span>Состав:</span> Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus veniam ipsam nostrum nisi architecto similique praesentium culpa nam illum modi.</p>\r\n\t\t\t\t\t<div class=\"card-modal__subinfo\">\r\n\t\t\t\t\t\t<h3 class=\"card-modal__price\">${element.price + \"$\"}</h3>\r\n\t\t\t\t\t\t<h4 class=\"card-modal__old-price\">${element.old_price + \"$\"}</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button type=\"button\" class=\"card-modal__btn-add-basket\" data-id=\"${\r\n\t\t\t\t\t\telement.id\r\n\t\t\t\t\t}\">Добавить в корзину</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>`\r\n\r\n\treturn item\r\n}\r\n\r\nfunction quickViewClick(event) {\r\n\tif (event.target.classList.contains(\"card__btn-quick-view\")) {\r\n\t\tconst cardId = event.target.dataset.id\r\n\t\tconst selectedCard = alyaStore.find((card) => card.id === cardId)\r\n\t\tif (selectedCard) {\r\n\t\t\tconst clonedCard = createCardModal(selectedCard)\r\n\t\t\tcardsBox.appendChild(clonedCard)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction removeCardModal(event) {\r\n\tif (event.target.classList.contains(\"btn-close\")) {\r\n\t\tconst cardModal = event.target.closest(\".card-modal\")\r\n\t\tcardModal.remove()\r\n\t}\r\n}\r\n\r\nfunction addToBasketClick(event) {\r\n\tif (\r\n\t\tevent.target.classList.contains(\"card__btn-add-basket\") ||\r\n\t\tevent.target.classList.contains(\"card-modal__btn-add-basket\")\r\n\t) {\r\n\t\tconst cardId = event.target.dataset.id\r\n\t\tconst selectedCard = alyaStore.find((card) => card.id === cardId)\r\n\t\tif (selectedCard) {\r\n\t\t\tlet basketStore = localStorage.getItem(\"basketStore\")\r\n\t\t\tlet basketArray = []\r\n\r\n\t\t\tif (basketStore) {\r\n\t\t\t\tbasketArray = JSON.parse(basketStore)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tbasketArray.push(selectedCard)\r\n\t\t\tlocalStorage.setItem(\"basketStore\", JSON.stringify(basketArray))\r\n\t\t\tlinkStoreToUserData()\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction removeAllFromBasketClick(event) {\r\n\tif (event.target.classList.contains(\"card__btn-del-all-basket\")) {\r\n\t\tlocalStorage.removeItem(\"basketStore\")\r\n\t}\r\n}\r\n\r\nlet isFilterActive = false\r\n\r\nfunction filterCardsByTitle(title) {\r\n\tconst cardTitles = document.querySelectorAll(\".card__title\")\r\n\tfor (let i = 0; i < cardTitles.length; i++) {\r\n\t\tconst card = cardTitles[i].closest(\".card\")\r\n\t\tif (cardTitles[i].textContent === title) {\r\n\t\t\tcard.style.display = \"flex\"\r\n\t\t} else {\r\n\t\t\tcard.style.display = \"none\"\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction resetCardFilter() {\r\n\tconst cards = document.querySelectorAll(\".card\")\r\n\tfor (let i = 0; i < cards.length; i++) {\r\n\t\tcards[i].style.display = \"flex\"\r\n\t}\r\n}\r\n\r\nfunction cardTitleClick(event) {\r\n\tif (event.target.classList.contains(\"card__title\")) {\r\n\t\tif (isFilterActive) {\r\n\t\t\tresetCardFilter()\r\n\t\t\tisFilterActive = false\r\n\t\t} else {\r\n\t\t\tconst title = event.target.textContent\r\n\t\t\tfilterCardsByTitle(title)\r\n\t\t\tisFilterActive = true\r\n\t\t}\r\n\t}\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", getCards)\r\ncardsBox.addEventListener(\"click\", quickViewClick)\r\ncardsBox.addEventListener(\"click\", addToBasketClick)\r\ncardsBox.addEventListener(\"click\", cardTitleClick)\r\ncardsBox.addEventListener(\"click\", removeAllFromBasketClick)\r\ncardsBox.addEventListener(\"click\", removeCardModal)","import { addCards } from \"../../page-modules/product-card/product-card.js\"\r\n\r\nlet alyaStore = []\r\n\r\nfunction getCards() {\r\n\tfetch(\"https://646f451109ff19b12086e48a.mockapi.io/wildberries/cards\")\r\n\t\t.then((response) => {\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\treturn response.json()\r\n\t\t\t} else {\r\n\t\t\t\tthrow Error(response)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then((arrayElements) => {\r\n\t\t\talyaStore = arrayElements\r\n\t\t\taddCards(arrayElements)\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\talert(error)\r\n\t\t})\r\n}\r\n\r\nfunction getDataCards() {\r\n\treturn fetch(\"https://646f451109ff19b12086e48a.mockapi.io/wildberries/cards\")\r\n\t\t.then(response => response.json())\r\n\t\t.then((arrayElements) => {\r\n\t\t\treturn arrayElements\r\n\t\t\t})\r\n\t\t.catch(error => { throw error })\r\n}\r\n\r\nexport { alyaStore, getCards, getDataCards }","import { AuthenticationApi } from \"../../API/authenticationApi.js\"\r\nimport { getTokenStore } from \"../../../stores/users-store/users-store.js\"\r\n\r\nexport function linkStoreToUserData() {\r\n    const store = JSON.parse(localStorage.getItem('basketStore'))\r\n    const token = getTokenStore()\r\n    if (token) {\r\n        AuthenticationApi.changeUserOrders(token, store)\r\n    } \r\n}\r\n","class AuthenticationApi {\r\n    static userUrl = 'https://646e07219c677e23218ae1e2.mockapi.io/users/user'\r\n\r\n    static setUser(login, password, token) {\r\n        return new Promise((resolve, reject) => {\r\n            fetch(this.userUrl, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    login: login,\r\n                    password: password,\r\n                    token: token,\r\n                    orders: []\r\n                })\r\n            })\r\n                .then(response => {\r\n                    if (response.ok) {\r\n                        resolve()\r\n                    } else {\r\n                        reject(new Error('Failed to set user'))\r\n                    }\r\n                })\r\n                .catch(error => reject(error))\r\n        })\r\n    }\r\n\r\n    static getUserByLogin(userData) {\r\n        return fetch(this.userUrl)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                return data.find(element => userData === element.login)\r\n            })\r\n            .catch(error => { throw error })\r\n    }\r\n\r\n    static getUserByToken(userToken) {\r\n        return fetch(this.userUrl)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                return data.find(element => userToken === element.token.toString())\r\n\r\n            })\r\n            .catch(error => { throw error })\r\n    }\r\n\r\n    static async changeUserOrders(userToken, orders) {\r\n        const userData = await AuthenticationApi.getUserByToken(userToken)       \r\n        const userId = userData.id\r\n\r\n        return fetch(`${this.userUrl}/${userId}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                orders: orders\r\n            })\r\n        })\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json()\r\n            } else {\r\n                throw new Error('Failed to change user data')\r\n            }\r\n        })\r\n        .catch(error => { throw error })\r\n    }\r\n}\r\n\r\nexport { AuthenticationApi }","import { USER_TOKEN } from \"../../core/consts/keys\"\r\n\r\nfunction getTokenStore() {\r\n    return sessionStorage.getItem(USER_TOKEN)\r\n}\r\n\r\nfunction removeTokenStore() {\r\n   return sessionStorage.removeItem(USER_TOKEN)\r\n}\r\n\r\nfunction setTokenStore(value) {\r\n    return sessionStorage.setItem(USER_TOKEN, value)\r\n}\r\n\r\nexport { getTokenStore, removeTokenStore, setTokenStore }","const USER_TOKEN = 'token'\r\n\r\nexport { USER_TOKEN }","const cardsInner = document.querySelector('.cards__inner')\r\nlet numberOfVisibleCards = 9\r\n\r\nexport function hiddenCards() {\r\n    const showMoreBtn = document.querySelector('.cards__btn-show-more')\r\n    let i = 0;\r\n    const allCards = Array.from(cardsInner.children)\r\n    \r\n    for (i; i < numberOfVisibleCards && i < allCards.length; i++) {\r\n        allCards[i].classList.add('card_active')\r\n    }\r\n\r\n    allCards.forEach(element => {\r\n        if(element.classList.contains('card_active')) {\r\n            setTimeout(()=> element.style.opacity = '1', 100)\r\n        }\r\n    })\r\n    \r\n    if (i >= allCards.length) {\r\n        showMoreBtn.style.display = 'none'\r\n    } else {\r\n        showMoreBtn.style.display = 'block'\r\n    }\r\n\r\n    showMoreBtn.addEventListener('click', clickShow)\r\n}\r\n\r\nfunction clickShow() {\r\n    numberOfVisibleCards += 9;\r\n    hiddenCards()\r\n}"],"names":["$67T2y","parcelRequire","$198c17bf53357603$var$cardsBox","document","querySelector","$198c17bf53357603$export$ea7a60f75b7e3e57","arrayElements","element","appendChild","$198c17bf53357603$var$createCardElement","$9b6hp","hiddenCards","item","createElement","classList","add","innerHTML","image","id","title","price","sale","old_price","$198c17bf53357603$var$isFilterActive","window","addEventListener","getCards","event","target","contains","cardId","dataset","selectedCard","alyaStore","find","card","clonedCard","$198c17bf53357603$var$createCardModal","basketStore","localStorage","getItem","basketArray","JSON","parse","push","setItem","stringify","$77CKc","linkStoreToUserData","cards","querySelectorAll","i","length","style","display","$198c17bf53357603$var$resetCardFilter","cardTitles","closest","textContent","$198c17bf53357603$var$filterCardsByTitle","removeItem","remove","$2bZdl","$475e175c7ebc4f24$export$cf649304969f8926","$475e175c7ebc4f24$export$bc61c71d8347e4d9","fetch","then","response","status","json","Error","addCards","catch","error","alert","$475e175c7ebc4f24$export$ec9637be1536f468","$02iEE","$52f73da14c7107e3$export$fddea017d5d77998","store","token","$3LgNA","getTokenStore","AuthenticationApi","changeUserOrders","$006ea8734ee51aac$export$762f992a2f2efa56","static","login","password","Promise","resolve","reject","this","userUrl","method","headers","body","orders","ok","userData","data","userToken","toString","userId","getUserByToken","$fEuAQ","$2bd2cac25a8b640a$export$e837badd9b9a5c9d","sessionStorage","USER_TOKEN","$2bd2cac25a8b640a$export$e71204bf8ea8b4eb","$2bd2cac25a8b640a$export$69df85587fbdbefe","value","$b65252a6988a10ce$export$58762f3a9b4cd9dc","$6aea032b93d5dc9a$var$cardsInner","$6aea032b93d5dc9a$var$numberOfVisibleCards","$6aea032b93d5dc9a$export$675deeb428ea0d2d","showMoreBtn","allCards","Array","from","children","forEach","setTimeout","opacity","$6aea032b93d5dc9a$var$clickShow"],"version":3,"file":"index.f7a95d1c.js.map"}